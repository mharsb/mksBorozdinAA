#!/bin/bash
# Выводит уникальный список пользователей заданной группы

# Проверяем, что передан хотя бы один аргумент (имя группы)
if [ $# -lt 1 ]; then
    echo "Использование: $0 <имя_группы> [файл_групп]"
    exit 1
fi

# Сохраняем имя группы из первого аргумента
GROUP_NAME="$1"

# Используем второй аргумент как путь к файлу, если не указан — берём /etc/group
GROUP_FILE="${2:-/etc/group}"

# Проверяем, существует ли файл групп
if [ ! -f "$GROUP_FILE" ]; then
    echo "Ошибка: файл $GROUP_FILE не найден" >&2
    exit 1
fi

# Ищем строку с нужной группой и извлекаем 4-е поле (список пользователей)
# Формат строки: group_name:x:GID:user1,user2,user3
USERS=$(grep "^${GROUP_NAME}:" "$GROUP_FILE" | cut -d: -f4)

# Проверяем, нашлись ли пользователи
if [ -z "$USERS" ]; then
    echo "Группа '$GROUP_NAME' не найдена или пуста"
    exit 0
fi

# Заменяем запятые на переносы строк, сортируем и удаляем дубликаты
echo "$USERS" | tr ',' '\n' | sort -u
